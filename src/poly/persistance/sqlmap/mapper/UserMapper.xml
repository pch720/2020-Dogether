<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="poly.persistance.mapper.IUserMapper">
    <!-- 회원가입 -->
    <insert id="Reg" parameterType="UserDTO">
        INSERT
        INTO USER
        (
			 USER_NAME,
			 USER_EMAIL,
			 PASSWORD,
			 REG_DT,
			 REG_ID,
			 UP_DT,
			 UP_ID,
			 USER_ASS
         )
        VALUES
        (
			#{userName},
         	#{userEmail},
         	#{passWord},
         	SYSDATE(),
         	#{userName},
         	SYSDATE(),
         	#{userName},
         	'0'
        )
    </insert>
	<!-- 이름 중복확인 -->
	<select id="nCheck" parameterType="String" resultType="String">
		SELECT COUNT(*)
		FROM
			USER
		WHERE
			USER_NAME=#{userName}
	</select>
	<!-- 이메일 중복확인 -->
	<select id="eCheck" parameterType="String" resultType="String">
		SELECT COUNT(*)
		FROM
			USER
		WHERE
			USER_EMAIL=#{userEmail}
	</select>
	<!-- 로그인하고정보가져오기 -->
	<select id="login" parameterType="UserDTO" resultType="UserDTO">
		SELECT
			USER_SEQ AS userSeq,
			USER_EMAIL AS userEmail,
			USER_NAME AS userName,
			USER_ASS AS userAss
		FROM USER
		WHERE USER_EMAIL = #{userEmail} AND PASSWORD = #{passWord}
	</select>
</mapper>